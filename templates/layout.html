<!DOCTYPE html>
<html>
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js"></script>
	<script type = "text/javascript" src = "/static/scripts/script.js"></script>
	<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/ui-lightness/jquery-ui.css"rel="stylesheet" type="text/css" />
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link href="/static/images/nerdpic.png" rel="icon">
	<link href="/static/images/logo.jpeg">
	<link href="/static/mainstyles/styles.css" rel="stylesheet">
	<link rel="stylesheet" href = "/static/minorstyles/autoComplete.css">
	<script src="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@10.2.6/dist/autoComplete.min.js"></script>
	<meta name="viewport" content="width=device-width" />
	{% block head %}
	{% endblock %}

</head>

<title> {% block title %}Studyist {% endblock %}</title>

{% with messages = get_flashed_messages() %}
      {% if messages %}
        {% for message in messages %}
        <div class="alert alert-danger alert-dismissible" role="alert">
            <strong>{{message}}</strong>
				<span type="button" class="close" data-dismiss="alert" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</span>
        </div>
        {% endfor %}
      {% endif %}
{% endwith %}

<div id= "navbox">
	<div class = "navbar-left">
		<svg class = "menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>
		<a href = "/homepage"><img id = "logo" src="/static/images/placeholder.png"></a>
	</div>
	<div class = "navbarinfo-center center">
		<li>
			<div id = "searchbar-box">
				<form action = "/homepage" method = "POST" id = "searchform">
					<div class = "autoComplete_wrapper">
						<input  dir="ltr" spellcheck="false" autocapitalize="off" autocorrect="off" autocomplete="off" name = "name" class = "form" type="text" id="autoComplete" placeholder = "Choose a Class!">
						<input id = "submitsearch" type = "submit">
					</div>
						<script>
							document.getElementById("autoComplete").addEventListener("keyup", function(event) {
								if (event.keyCode === 13) {
									document.getElementById("searchform").submit();
								}
							});
							var courses = getData()
							async function getData(){
    							const response = await fetch('/getcourses')
    							var courses = await response.json()
    							console.log(courses);
								return courses
							}
							const autoCompleteJS = new autoComplete({
								selector: "#autoComplete",
								data: {
									src: courses,
									cache: true,
								},
								resultsList: {
									element: (list, data) => {
										if (!data.results.length) {
											// Create "No Results" message element
											const message = document.createElement("div");
											// Add class to the created element
											message.setAttribute("class", "no_result");
											// Add message text content
											message.innerHTML = `<span>Found No Results for "${data.query}"</span>`;
											// Append message element to the results list
											list.prepend(message);
										}
									},
									noResults: true,
								},
								resultItem: {
									highlight: true
								},
								events: {
									input: {
										selection: (event) => {
											const selection = event.detail.selection.value;
											autoCompleteJS.input.value = selection;
										}
									}
								}
							});
						</script>
				</form>
			</div>
		</li>
	    {% block postbutton %}
	    {% endblock %}
	</div>
</div>
<body>
	<div class="body-div">
		{% block heading %}
		{% endblock %}
		{% block body %}
		{% endblock %}

		{% block reply %}
		{% endblock %}
	</div>
	{% block resources %}
	{% endblock %}
</body>


